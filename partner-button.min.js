/*! fapedit-web/partner-button.js v1.0 | (c) 2018 FAPEDIT op. | Released under the MIT license */
!function(t,e,r){var n="FapeditPartnerButton";r=t[n];var o="fapedit-web/partner-button.js",i=t[r];if(!(i instanceof Function&&i.hasOwnProperty("p")&&i.p instanceof Array&&i.hasOwnProperty("v")&&i.hasOwnProperty("r")&&"string"==typeof i.r))throw new Error(o+": [ERROR] something went wrong with the include script fragment");var a=!0===i.v,s=i.r;a&&console.log(o+" v1.0 loaded");var g,l,p=["viewProps","createFrom","addTo","brandingF","branding"],d=["white_gray","white_green","green","gray"],c={viewProps:683,createFrom:473,addTo:823,brandingF:75,branding:179},u=((g=e.createElement("a")).style.cssText="-webkit-filter:blur(2px);filter:blur(2px);",!!g.style.length&&(void 0===document.documentMode||document.documentMode>9)),h=!(!(l=e.createElement("canvas")).getContext||!l.getContext("2d"));u||(h?a&&console.log(o+": [NOTICE] CSS filters are unsupported (browser is probably MSIE v9-11)"):a&&console.log(o+": [WARNING] CSS filters and Canvas API are unsupported, falling back to static buttonface and FORCE white_green style"));var b=new Array;!function(t){var e=0,r=function(){++e==p.length&&t&&(a&&console.log(o+": [NOTICE] loading image resources finished"),t.apply(this,arguments))};for(var n in p){var i=new Image;i.crossOrigin="anonymous",i.src="http://static.fapedit.hu/js/partner-button/"+p[n]+".png",i.addEventListener("load",r,!1),b.push(i)}}(function(){var g,l,m,f,w,y,v,R,k;y=16777215,v=4949094,R=7171950,m=e.createElement("canvas"),f=function(t){for(var e=l.getImageData(0,0,m.width,m.height),r=0;r<e.height;r++)for(var n=0;n<e.width;n++)for(var o=4*(r*m.width+n),i=16;i>=0;i-=8)e.data[o++]=(t&255<<i)>>>i;l.putImageData(e,0,0)},k={load:function(t){var e=b[t];m.width=e.width,m.height=e.height,(l=m.getContext("2d")).clearRect(0,0,e.width,e.height),l.drawImage(e,0,0)},getDataUrl:function(){return m.toDataURL()},grayscale:function(){f(R)},overbrighten:function(){f(y)}},(g=e.createElement("style")).innerHTML='button[id^="'+n+'"]{padding:0 !important;margin:1em 0;box-sizing:content-box !important;border-style:solid !important;'+(u||!h?"border-color:#"+v.toString(16)+" !important;":"")+"position:relative;overflow:hidden !important;background-color:"+(u||h?"transparent !important;background-size:100% 200% !important;background-position:center top !important;transition:background-position .117s ease-out !important;":"#"+y.toString(16)+" !important;")+'cursor:pointer !important;}button[id^="'+n+'"]:after'+(!u&&h?',button[id^="'+n+'"]:before':"")+'{content:"" !important;position:absolute !important;left:0 !important;width:100% !important;top:0 !important;height:100% !important;background-color:transparent !important;background-position:center center !important;background-size:contain !important;image-rendering:pixelated !important;-ms-interpolation-mode:nearest-neighbor !important;background-repeat:no-repeat !important;'+(u?"transition:filter .117s linear,-webkit-filter .117s linear !important;":h?"transition:opacity .117s linear !important;":"")+"}"+(u||h?'button[id^="'+n+'"].with_border'+(!u&&h?":not(.grayscale)":"")+"{background-image:linear-gradient(to top,#"+v.toString(16)+" 50%,#"+y.toString(16)+' 50%) !important;}button[id^="'+n+'"]:not(.with_border)'+(!u&&h?":not(.grayscale)":"")+"{background-image:linear-gradient(to bottom,#"+v.toString(16)+" 50%,#"+y.toString(16)+' 50%) !important;}button[id^="'+n+'"]:hover{background-position:center bottom !important;}':"")+(!u&&h?'button[id^="'+n+'"]:not(.grayscale){border-color:#'+v.toString(16)+' !important;}button[id^="'+n+'"].grayscale{border-color:#'+R.toString(16)+' !important;}button[id^="'+n+'"].with_border.grayscale{background-image:linear-gradient(to top,#'+R.toString(16)+" 50%,#"+y.toString(16)+' 50%) !important;}button[id^="'+n+'"]:not(.with_border).grayscale{background-image:linear-gradient(to bottom,#'+R.toString(16)+" 50%,#"+y.toString(16)+" 50%) !important;}":"")+function(){var t="";for(var e in p)u||!h?t+='button[id^="'+n+'"].'+p[e]+":after{background-image:url('"+(h?k.getDataUrl(k.load(e)):b[e].src)+"') !important;}":(k.load(e),t+='button[id^="'+n+'"].'+p[e]+':not(.overbrighten):not(.grayscale):after,button[id^="'+n+'"].'+p[e]+".overbrighten:not(.grayscale):before{background-image:url('"+k.getDataUrl()+"') !important;}button[id^=\""+n+'"].'+p[e]+'.overbrighten:after,button[id^="'+n+'"].'+p[e]+":not(.overbrighten):before{background-image:url('"+k.getDataUrl(k.overbrighten())+"') !important;}button[id^=\""+n+'"].'+p[e]+':not(.overbrighten).grayscale:after,button[id^="'+n+'"].'+p[e]+".overbrighten.grayscale:before{background-image:url('"+k.getDataUrl(k.grayscale())+"') !important;}");return t}()+(w="",u?w+='button[id^="'+n+'"].grayscale{-webkit-filter:grayscale(0.96) !important;filter:grayscale(0.96) !important;}button[id^="'+n+'"].overbrighten:after,button[id^="'+n+'"]:not(.overbrighten):hover:after{-webkit-filter:brightness(3.11) !important;filter:brightness(3.11) !important;}button[id^="'+n+'"].overbrighten:hover:after,button[id^="'+n+'"]:not(.overbrighten):after{-webkit-filter:brightness(1) !important;filter:brightness(1) !important;}':h&&(w+='button[id^="'+n+'"]:after,button[id^="'+n+'"]:hover:before{opacity:1 !important;}button[id^="'+n+'"]:before,button[id^="'+n+'"]:hover:after{opacity:0 !important;}'),w),e.getElementsByTagName("head")[0].appendChild(g);var E=0;for(var O in t[r]=function(t){var r,i,g,l,u;if((t=t||{}).hasOwnProperty("query")&&(r=t.query),r&&("string"!=typeof r||!/q=[a-z]+/.test(r)||!/s=[a-z]+/.test(r)))throw new Error(o+': [ERROR] argument "query" '+r+" {"+typeof r+"} is not a string or is invalid");t.hasOwnProperty("caption")&&(i=t.caption),p.indexOf(i)<0&&(a&&console.log(o+': [WARNING] argument "caption" '+i+" {"+typeof i+"} is unknown, falling back to default"),i=r?"viewProps":"brandingF");var h,b,m=/branding/.test(i);if(m==!!r)throw m?new Error(o+': [ERROR] argument "query" '+r+" {"+typeof r+'} is in conflict with argument "caption" '+i+" {"+typeof i+"}"):new Error(o+': [ERROR] required argument "query" is not present in argument map');if(t.hasOwnProperty("style")&&(g=t.style),h=/_rounded$/.exec(g),(b=null!==h)&&(g=g.substr(0,g.length-h[0].length)),l=b,d.indexOf(g)<0&&(a&&console.log(o+': [WARNING] argument "style" '+g+" {"+typeof g+"} is unknown, falling back to default"),g="green"),t.hasOwnProperty("fit_width")||t.hasOwnProperty("fit_height")){var f,w;if(t.hasOwnProperty("fit_width")){if(!isFinite(t.fit_width)||t.fit_width<=0)throw new Error(o+': [ERROR] argument "fit_width" '+fit_width+" {"+typeof fit_width+"} is not a number or less than or equal to 0");f=t.fit_width/(c[i]+8)}else f=1/0;if(t.hasOwnProperty("fit_height")){if(!isFinite(t.fit_height)||t.fit_height<=0)throw new Error(o+': [ERROR] argument "fit_height" '+fit_height+" {"+typeof fit_height+"} is not a number or less than or equal to 0");w=t.fit_height/83}else w=1/0;u=Math.min(f,w),a&&console.log(o+': [NOTICE] set argument "scale" to '+u+" {"+typeof u+"} according to present fit arguments")}else if(!t.hasOwnProperty("scale")||"string"==typeof t.scale&&"normal"==t.scale)u=m?.48:.386;else if(t.hasOwnProperty("scale"))if("string"==typeof t.scale)if("small"==t.scale)u=m?.4:.3;else{if("large"!=t.scale)throw new Error(o+': [ERROR] argument "scale" '+u+" {"+typeof u+"} is unknown as string");u=m?.67:.52}else u=t.scale;if(!isFinite(u)||u<=0)throw new Error(o+': [ERROR] argument "scale" '+u+" {"+typeof u+"} is not a number or less than or equal to 0");m?u<.4&&a&&console.log(o+': [WARNING] argument "scale" '+u+" {"+typeof u+"} is less than 0.4; this causes unrecognizable branding"):u<.3&&a&&console.log(o+': [WARNING] argument "scale" '+u+" {"+typeof u+"} is less than 0.3, this causes unreadable text"),u>1&&a&&console.log(o+': [WARNING] argument "scale" '+u+" {"+typeof u+"} is greater than 1; this causes pixelation of magnified raster texture");var y=this instanceof HTMLElement?this:e.createElement("button");"visible"!=y.style.visibility&&(y.style.visibility="visible"),y.id=n+E++;var v=[i];return/white/.test(g)?v.push("with_border"):v.push("overbrighten"),/gray/.test(g)&&v.push("grayscale"),y.className+=v.join(" "),y.style.cssText="border-width:"+Math.round(4*u)+"px !important;width:"+Math.round(c[i]*u)+"px !important;height:"+Math.round(75*u)+"px !important;"+(l?"border-radius:"+4/3*4*u+"px !important;":""),m&&(y.title="FAPEDIT Asszisztens"),y.addEventListener("click",function(){location.assign("http://live.fapedit.hu/server/partner-button_redirect.php?p="+encodeURIComponent(s)+"&utm_campaign=partner-button&utm_medium="+(m?"enter-app":"product-click")+(r?"&"+r:""))},!1),y},i.p){var _=i.p[O];_.e.parentNode?_.e.parentNode.replaceChild(t[r].apply(_.e,_.a),_.e):a&&console.log(o+": [WARNING] return element of earlier func call is not in DOM, skipping",_.a)}i=void 0})}(window,document);